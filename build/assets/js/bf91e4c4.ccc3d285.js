"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[1071],{4540:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>d,contentTitle:()=>i,default:()=>u,frontMatter:()=>n,metadata:()=>c,toc:()=>l});var o=t(4848),r=t(8453);const n={sidebar_position:105},i="Protect the server process",c={id:"node-guide/tasks/protect",title:"Protect the server process",description:"Sometimes, the OS could kill the wasmedge process on the GaiaNet node if it consumes too much resources. For production",source:"@site/docs/node-guide/tasks/protect.md",sourceDirName:"node-guide/tasks",slug:"/node-guide/tasks/protect",permalink:"/node-guide/tasks/protect",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/node-guide/tasks/protect.md",tags:[],version:"current",sidebarPosition:105,frontMatter:{sidebar_position:105},sidebar:"tutorialSidebar",previous:{title:"Run a local-only node",permalink:"/node-guide/tasks/local"},next:{title:"Creator Guide",permalink:"/category/creator-guide"}},d={},l=[{value:"Use Supervise",id:"use-supervise",level:2},{value:"Reduce the nice value",id:"reduce-the-nice-value",level:2}];function a(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(s.h1,{id:"protect-the-server-process",children:"Protect the server process"}),"\n",(0,o.jsxs)(s.p,{children:["Sometimes, the OS could kill the ",(0,o.jsx)(s.code,{children:"wasmedge"})," process on the GaiaNet node if it consumes too much resources. For production\nservers, you should protect the server process."]}),"\n",(0,o.jsx)(s.h2,{id:"use-supervise",children:"Use Supervise"}),"\n",(0,o.jsxs)(s.p,{children:["The ",(0,o.jsx)(s.code,{children:"supervise"})," tool can help us monitor the ",(0,o.jsx)(s.code,{children:"wasmedge"})," process, and automatically restart the process\nin case the process dies or is killed.\nThe ",(0,o.jsx)(s.code,{children:"gaianet"})," CLI will make use of ",(0,o.jsx)(s.code,{children:"supervise"})," automatically if it is installed on the system."]}),"\n",(0,o.jsxs)(s.p,{children:["For macOS users, you can install ",(0,o.jsx)(s.code,{children:"supervise"})," via the daemontools tool by running the following command."]}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{children:"brew install daemontools\n"})}),"\n",(0,o.jsxs)(s.p,{children:["For Linux users, please refer to ",(0,o.jsx)(s.a,{href:"https://cr.yp.to/daemontools/install.html",children:"the installation guide"})," to install the ",(0,o.jsx)(s.code,{children:"daemontools"})," tool."]}),"\n",(0,o.jsx)(s.h2,{id:"reduce-the-nice-value",children:"Reduce the nice value"}),"\n",(0,o.jsxs)(s.p,{children:["If the ",(0,o.jsx)(s.code,{children:"supervise"})," tool is too heavy handed, we could also increase the priority of the ",(0,o.jsx)(s.code,{children:"wasmedge"})," process. The OS\nwill try NOT to kill high priority processes until it absolutely has to. We do that by reducing the ",(0,o.jsx)(s.code,{children:"nice"})," value\nof the ",(0,o.jsx)(s.code,{children:"wasmedge"})," process."]}),"\n",(0,o.jsx)(s.pre,{children:(0,o.jsx)(s.code,{children:"sudo renice -n -19 $(cat $HOME/gaianet/llamaedge.pid)\n"})}),"\n",(0,o.jsx)(s.p,{children:"Good luck!"})]})}function u(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,o.jsx)(s,{...e,children:(0,o.jsx)(a,{...e})}):a(e)}},8453:(e,s,t)=>{t.d(s,{R:()=>i,x:()=>c});var o=t(6540);const r={},n=o.createContext(r);function i(e){const s=o.useContext(n);return o.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),o.createElement(n.Provider,{value:s},e.children)}}}]);